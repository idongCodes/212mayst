This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app/
  about/
    page.tsx
  chat/
    page.tsx
  common-room/
    page.tsx
  components/
    AutoLogout.tsx
    FeedbackForm.tsx
    Footer.tsx
    Header.tsx
    Navigation.tsx
    PraiseForm.tsx
    RouteGuard.tsx
  contact/
    page.tsx
  feedback/
    page.tsx
  join/
    page.tsx
  login/
    page.tsx
  mates/
    page.tsx
  my-room/
    page.tsx
  notifications/
    page.tsx
  actions.ts
  feedback-db.json
  globals.css
  layout.tsx
  page.tsx
  posts-db.json
  praise-db.json
  users-db.json
public/
  about.mp4
  file.svg
  globe.svg
  hero.png
  heroVid.mov
  logo+favicon.ico
  logo+favicon.jpg
  next.svg
  vercel.svg
  window.svg
.gitignore
eslint.config.mjs
next.config.ts
package.json
postcss.config.mjs
README.md
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/chat/page.tsx">
export default function Chat() {
  return <div className="p-4 text-center">House Chat</div>;
}
</file>

<file path="app/components/AutoLogout.tsx">
/**
 * file: app/components/AutoLogout.tsx
 * description: Handles auto-logout on 15m inactivity. Closing tab/browser is handled by sessionStorage.
 */

"use client";

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';

export default function AutoLogout() {
  const router = useRouter();

  useEffect(() => {
    // 15 Minutes in milliseconds
    const TIMEOUT_MS = 15 * 60 * 1000; 
    let timeoutId: NodeJS.Timeout;

    const performLogout = () => {
      // Only proceed if a user is actually logged in
      if (sessionStorage.getItem('212user')) {
        sessionStorage.removeItem('212user');
        alert("Session timed out due to inactivity.");
        router.push('/'); // Redirect to landing page
      }
    };

    const resetTimer = () => {
      if (timeoutId) clearTimeout(timeoutId);
      timeoutId = setTimeout(performLogout, TIMEOUT_MS);
    };

    // Events that constitute "activity"
    const events = ['mousedown', 'keydown', 'scroll', 'touchstart', 'mousemove'];

    // Attach listeners
    events.forEach(event => document.addEventListener(event, resetTimer));

    // Initialize timer
    resetTimer();

    // Cleanup listeners on unmount
    return () => {
      events.forEach(event => document.removeEventListener(event, resetTimer));
      if (timeoutId) clearTimeout(timeoutId);
    };
  }, [router]);

  return null; // This component renders nothing
}
</file>

<file path="app/components/FeedbackForm.tsx">
/**
 * file: app/components/FeedbackForm.tsx
 * description: Reusable Feedback form that locks itself for unauthenticated users.
 */

"use client";

import React, { useState, useEffect } from 'react';
import { MessageSquare, Lock, Send, AlertTriangle } from 'lucide-react';
import { addFeedback } from '../actions';
import Link from 'next/link';

export default function FeedbackForm() {
  const [formData, setFormData] = useState({ subject: "", message: "" });
  const [user, setUser] = useState<any>(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const storedUser = sessionStorage.getItem('212user');
    if (storedUser) {
      setUser(JSON.parse(storedUser));
    }
  }, []);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!user) return;

    setLoading(true);
    await addFeedback({
      id: Date.now(),
      name: user.alias || user.firstName,
      role: user.role,
      subject: formData.subject,
      message: formData.message,
      submittedAt: new Date().toISOString()
    });
    setLoading(false);
    setFormData({ subject: "", message: "" });
    alert("Feedback submitted. Thank you!");
  };

  return (
    <div style={{ 
      backgroundColor: 'white', 
      padding: '1.5rem', 
      borderRadius: '20px', 
      boxShadow: '0 4px 6px rgba(0,0,0,0.05)',
      marginTop: '2rem'
    }}>
      <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '1rem' }}>
        <MessageSquare size={24} color="#f59e0b" />
        <h3 style={{ margin: 0, fontSize: '1.2rem', color: '#1e293b' }}>House Feedback</h3>
      </div>

      {!user ? (
        // LOCKED STATE
        <div style={{ 
          textAlign: 'center', 
          padding: '1.5rem', 
          backgroundColor: '#fffbeb', 
          borderRadius: '12px',
          border: '1px dashed #fcd34d'
        }}>
          <Lock size={24} color="#d97706" style={{ marginBottom: '0.5rem' }} />
          <p style={{ margin: 0, color: '#b45309', fontSize: '0.9rem' }}>
            <Link href="/login" style={{ color: '#d97706', fontWeight: 'bold', textDecoration: 'underline' }}>Log in</Link> to submit issues or suggestions.
          </p>
        </div>
      ) : (
        // UNLOCKED FORM
        <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
          <input 
            type="text" 
            placeholder="Subject (e.g. Wifi, Cleaning)"
            value={formData.subject}
            onChange={e => setFormData({...formData, subject: e.target.value})}
            required
            style={{ padding: '10px', borderRadius: '8px', border: '1px solid #e2e8f0', outline: 'none' }}
          />
          <textarea 
            placeholder="Describe the issue..." 
            value={formData.message}
            onChange={e => setFormData({...formData, message: e.target.value})}
            required
            rows={3}
            style={{ padding: '10px', borderRadius: '8px', border: '1px solid #e2e8f0', outline: 'none', resize: 'none' }}
          />
          <button 
            type="submit" 
            disabled={loading}
            style={{ 
              alignSelf: 'flex-end',
              backgroundColor: '#f59e0b', 
              color: 'white', 
              border: 'none', 
              padding: '8px 16px', 
              borderRadius: '8px', 
              cursor: 'pointer',
              fontWeight: 'bold',
              display: 'flex', alignItems: 'center', gap: '5px'
            }}
          >
            {loading ? '...' : <>Submit <Send size={16} /></>}
          </button>
        </form>
      )}
    </div>
  );
}
</file>

<file path="app/components/PraiseForm.tsx">
/**
 * file: app/components/PraiseForm.tsx
 * description: A component to submit Praise. Hides form for non-auth users.
 */

"use client";

import React, { useState, useEffect } from 'react';
import { Heart, Lock, Sparkles } from 'lucide-react';
import { addPraise } from '../actions';
import Link from 'next/link';

export default function PraiseForm() {
  const [message, setMessage] = useState("");
  const [user, setUser] = useState<any>(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const storedUser = sessionStorage.getItem('212user');
    if (storedUser) {
      setUser(JSON.parse(storedUser));
    }
  }, []);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!user || !message.trim()) return;

    setLoading(true);
    await addPraise({
      id: Date.now(),
      name: user.alias || user.firstName,
      role: user.role,
      subject: "Praise", // Default subject
      message: message
    });
    setLoading(false);
    setMessage("");
    alert("Praise sent! üéâ");
  };

  return (
    <div style={{ 
      backgroundColor: 'white', 
      padding: '1.5rem', 
      borderRadius: '20px', 
      boxShadow: '0 4px 6px rgba(0,0,0,0.05)',
      marginTop: '2rem'
    }}>
      <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '1rem' }}>
        <Heart fill="var(--light-green)" color="var(--light-green)" size={24} />
        <h3 style={{ margin: 0, fontSize: '1.2rem', color: '#1e293b' }}>Give Praise</h3>
      </div>

      {/* RESTRICTED ACCESS */}
      {!user ? (
        <div style={{ 
          textAlign: 'center', 
          padding: '1.5rem', 
          backgroundColor: '#f8fafc', 
          borderRadius: '12px',
          border: '1px dashed #cbd5e1'
        }}>
          <Lock size={24} color="#94a3b8" style={{ marginBottom: '0.5rem' }} />
          <p style={{ margin: 0, color: '#64748b', fontSize: '0.9rem' }}>
            <Link href="/login" style={{ color: 'var(--sky-blue)', fontWeight: 'bold', textDecoration: 'underline' }}>Log in</Link> to send praise to your housemates.
          </p>
        </div>
      ) : (
        /* AUTHENTICATED FORM */
        <form onSubmit={handleSubmit} style={{ display: 'flex', gap: '10px' }}>
          <input 
            type="text" 
            placeholder={`Who is awesome today, ${user.firstName}?`}
            value={message}
            onChange={(e) => setMessage(e.target.value)}
            style={{ 
              flex: 1, 
              padding: '12px', 
              borderRadius: '12px', 
              border: '1px solid #e2e8f0', 
              outline: 'none',
              backgroundColor: '#f8fafc'
            }}
          />
          <button 
            type="submit" 
            disabled={loading}
            style={{ 
              backgroundColor: 'var(--light-green)', 
              color: '#171717', 
              border: 'none', 
              padding: '12px', 
              borderRadius: '12px', 
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            {loading ? '...' : <Sparkles size={20} />}
          </button>
        </form>
      )}
    </div>
  );
}
</file>

<file path="app/components/RouteGuard.tsx">
/**
 * file: app/components/RouteGuard.tsx
 * description: Restricts access to private routes for logged-out users.
 */

"use client";

import { useEffect, useState } from 'react';
import { useRouter, usePathname } from 'next/navigation';

// Define the routes anyone can see
const PUBLIC_ROUTES = ['/', '/login', '/join'];

export default function RouteGuard({ children }: { children: React.ReactNode }) {
  const router = useRouter();
  const pathname = usePathname();
  const [isAuthorized, setIsAuthorized] = useState(false);

  useEffect(() => {
    // 1. Check if the current route is public
    if (PUBLIC_ROUTES.includes(pathname)) {
      setIsAuthorized(true);
      return;
    }

    // 2. If route is private, check for user session
    const user = sessionStorage.getItem('212user');

    if (!user) {
      // User is Guest trying to access Private Route -> Block & Redirect
      setIsAuthorized(false);
      router.push('/login'); 
    } else {
      // User is Logged In -> Allow
      setIsAuthorized(true);
    }
  }, [pathname, router]);

  // Prevent flashing of protected content while checking
  // Only render children if authorized OR if we are on a public route
  if (!isAuthorized && !PUBLIC_ROUTES.includes(pathname)) {
    return null; // Render nothing (or a loading spinner) while redirecting
  }

  return <>{children}</>;
}
</file>

<file path="app/contact/page.tsx">
export default function Contact() {
  return <div className="p-4 text-center">Contact</div>;
}
</file>

<file path="app/login/page.tsx">
/**
 * file: app/login/page.tsx
 * description: Login page accepting Phone and Door Code. Redirects to Common Room on success.
 */

"use client";

import React, { useState } from 'react';
import { Phone, Key, LogIn, AlertCircle, Loader2 } from 'lucide-react';
import Link from 'next/link';
import { useRouter } from 'next/navigation';
import { loginUser } from '../actions';

export default function Login() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    phone: "",
    doorCode: ""
  });
  
  const [status, setStatus] = useState<'idle' | 'loading' | 'error' | 'success'>('idle');
  const [errorMessage, setErrorMessage] = useState("");

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
    
    if (status === 'error') {
      setStatus('idle');
      setErrorMessage("");
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setStatus('loading');

    const result = await loginUser(formData.phone, formData.doorCode);

    if (result.success && result.user) {
      sessionStorage.setItem('212user', JSON.stringify(result.user));
      setStatus('success');
      setTimeout(() => {
        router.push('/common-room');
      }, 1000);
    } else {
      setStatus('error');
      setErrorMessage(result.message || "Login failed");
    }
  };

  return (
    <main style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: '2rem', backgroundColor: '#f0f9ff' }}>
      
      <div className="animate-fade-in" style={{ width: '100%', maxWidth: '400px' }}>
        
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <div style={{ width: '80px', height: '80px', margin: '0 auto 1rem auto', backgroundColor: 'var(--sky-blue)', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: '0 10px 25px rgba(135, 206, 235, 0.4)' }}>
            <LogIn size={40} color="white" />
          </div>
          <h1 style={{ fontSize: '2rem', fontWeight: 'bold', color: '#1e293b', marginBottom: '0.5rem' }}>Welcome Back</h1>
          <p style={{ color: '#64748b' }}>Unlock the door to get in.</p>
        </div>

        <div style={{ backgroundColor: 'white', padding: '2rem', borderRadius: '24px', boxShadow: '0 20px 40px rgba(0,0,0,0.05)', border: status === 'error' ? '2px solid #ef4444' : '1px solid #e2e8f0' }}>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1.25rem' }}>
            
            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Phone Number</label>
              <div style={{ position: 'relative' }}>
                <Phone size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                <input type="tel" name="phone" placeholder="(508) 555-0123" required value={formData.phone} onChange={handleChange} style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none' }} />
              </div>
            </div>

            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Door Code</label>
              <div style={{ position: 'relative' }}>
                <Key size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                <input type="password" name="doorCode" placeholder="Enter code" required value={formData.doorCode} onChange={handleChange} maxLength={4} style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none', letterSpacing: '2px' }} />
              </div>
              
              {status === 'error' && (
                <div className="animate-slide-in" style={{ display: 'flex', alignItems: 'center', gap: '5px', marginTop: '10px', color: '#ef4444', fontSize: '0.9rem', fontWeight: 'bold' }}>
                  <AlertCircle size={16} />
                  {errorMessage}
                </div>
              )}
            </div>

            <button type="submit" disabled={status === 'loading' || status === 'success'} style={{ marginTop: '1rem', backgroundColor: status === 'success' ? 'var(--light-green)' : 'var(--sandy-brown)', color: status === 'success' ? '#171717' : 'white', border: 'none', padding: '16px', borderRadius: '12px', fontSize: '1.1rem', fontWeight: 'bold', cursor: 'pointer', transition: 'all 0.2s', boxShadow: '0 4px 12px rgba(244, 164, 96, 0.4)', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>
              {status === 'loading' ? <><Loader2 className="animate-spin" size={20}/> Checking Key...</> : status === 'success' ? "Unlocked!" : "Login"}
            </button>
          </form>

          <div style={{ marginTop: '1.5rem', textAlign: 'center' }}>
            <Link href="/join" style={{ fontSize: '0.9rem', color: '#64748b', textDecoration: 'none' }}>
              New here? <span style={{ color: 'var(--sky-blue)', fontWeight: 'bold' }}>Join the house</span>
            </Link>
          </div>

        </div>
      </div>
    </main>
  );
}
</file>

<file path="app/my-room/page.tsx">
export default function MyRoom() {
  return <div className="p-4 text-center">My Room</div>;
}
</file>

<file path="app/notifications/page.tsx">
export default function Notifications() {
  return <div className="p-4 text-center">Notifications</div>;
}
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
</file>

<file path="next.config.ts">
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;
</file>

<file path="postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
</file>

<file path="app/about/page.tsx">
import React from 'react';
import { User, Heart, Crown, Baby, MapPin } from 'lucide-react';

export default function About() {
  
  const family = [
    {
      name: "Kennedy (Kay) Udechukwu",
      age: "31",
      role: "Landlord & Owner",
      icon: <Crown size={32} color="#F4A460" />, 
      desc: "Nigeria to America. Loving father and husband. Engineering degree, great with finances, loves soccer, very sociable, all around cool guy."
    },
    {
      name: "Stephanie (Steph) Udechukwu",
      age: "34",
      role: "First Lady",
      icon: <Heart size={32} color="#FF69B4" />, 
      desc: "Kay's adored and loving wife. Steph is a Portuguese speaker, dance, health and fitness guru, can slay Portuguese AND Nigerian dishes, and loves reality TV."
    },
    {
      name: "Kennedy Jr (Kennegium üòÖ)",
      age: "Baby Menace",
      role: "1st Prince of 212 May St",
      icon: <Baby size={32} color="#87CEEB" />, 
      desc: "Son to Kay & Steph. KJ is craaaazyy but cute asf, more to be determined lmao."
    }
  ];

  return (
    <main style={{ minHeight: '100vh', position: 'relative', overflowX: 'hidden', overflowY: 'auto' }}>
      
      {/* 1. BACKGROUND VIDEO */}
      <div style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', zIndex: -1 }}>
        <video
          autoPlay
          loop
          muted
          playsInline
          style={{ 
            width: '100%', 
            height: '100%', 
            objectFit: 'cover', 
            objectPosition: 'center' 
          }}
        >
          <source src="/about.mp4" />
        </video>
        <div 
          style={{ 
            position: 'absolute', 
            top: 0, left: 0, right: 0, bottom: 0, 
            backgroundColor: 'rgba(0, 0, 0, 0.5)' 
          }} 
        />
      </div>

      {/* 2. SCROLLABLE CONTENT */}
      <div 
        style={{ 
          position: 'relative', 
          zIndex: 10, 
          display: 'flex', 
          flexDirection: 'column', 
          alignItems: 'center', 
          padding: '6rem 2rem 6rem 2rem' 
        }}
      >
        
        {/* Title Section */}
        <div className="animate-fade-in" style={{ textAlign: 'center', marginBottom: '3rem', color: 'white' }}>
          <h1 style={{ 
            fontSize: '3.5rem', 
            fontWeight: 'bold', 
            textShadow: '0 4px 10px rgba(0,0,0,0.5)',
            marginBottom: '1rem'
          }}>
            Our Story
          </h1>
          <p style={{ fontSize: '1.25rem', opacity: 0.9, maxWidth: '600px', margin: '0 auto' }}>
            More than just a street address. It's where the magic happens.
          </p>
        </div>

        {/* --- THE HQ CARD --- */}
        <div 
          className="animate-slide-in"
          style={{
            maxWidth: '800px',
            width: '100%',
            backgroundColor: 'rgba(0, 0, 0, 0.6)', 
            backdropFilter: 'blur(20px)',
            WebkitBackdropFilter: 'blur(20px)',
            borderRadius: '30px',
            padding: '3rem',
            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5)',
            border: '1px solid rgba(255, 255, 255, 0.1)',
            color: 'white',
            marginBottom: '2rem'
          }}
        >
          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', flexWrap: 'wrap', gap: '1rem', marginBottom: '2rem' }}>
            <h2 style={{ color: 'var(--sandy-brown)', fontSize: '2rem', fontWeight: 'bold', margin: 0 }}>
              The HQ
            </h2>
            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', backgroundColor: 'rgba(255,255,255,0.1)', padding: '8px 16px', borderRadius: '20px' }}>
              <MapPin size={18} color="var(--sky-blue)" />
              <span style={{ fontSize: '0.9rem', fontWeight: 'bold' }}>Worcester, MA 01602</span>
            </div>
          </div>
          
          {/* SECTION 1: OUR HOOD */}
          <h3 style={{ fontSize: '1.4rem', fontWeight: 'bold', marginBottom: '0.5rem', color: 'var(--sky-blue)' }}>
            Our Hood
          </h3>
          <p style={{ lineHeight: '1.8', fontSize: '1.1rem', color: '#e5e5e5', marginBottom: '1.5rem' }}>
            Located in a charming, leafy neighborhood just moments from Worcester State University, <strong>212 May Street</strong> offers the perfect blend of quiet residential living and city accessibility. This classic New England multi-family home features spacious interiors, abundant natural light, and a backyard perfect for summer gatherings.
          </p>

          <hr style={{ border: 'none', borderTop: '1px solid rgba(255,255,255,0.1)', margin: '2rem 0' }} />

          {/* SECTION 2: OUR BUNKER */}
          <h3 style={{ fontSize: '1.4rem', fontWeight: 'bold', marginBottom: '0.5rem', color: 'var(--sky-blue)' }}>
            Our Bunker
          </h3>
          <p style={{ lineHeight: '1.8', fontSize: '1.1rem', color: '#d4d4d4', marginBottom: '2rem', fontStyle: 'italic' }}>
            "This beautifully renovated home is just what you are looking for. Kitchen features stainless steel appliances, granite countertops, and new cabinets. Enjoy entertaining in the spacious living room. Dining room features beautiful hardwood floors, original woodwork and bench seat. Enjoy the convenience of the first floor laundry. Master bedroom, three additional bedrooms and a full bath are located on the second floor. Third floor offers the bonus of two additional good sized bedrooms. New windows. Relaxing front porch."
          </p>

          {/* Stats Grid */}
          <div style={{ 
            display: 'grid', 
            gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))', 
            gap: '1.5rem', 
            borderTop: '1px solid rgba(255,255,255,0.1)', 
            paddingTop: '2rem' 
          }}>
            
            <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
              <span style={{ fontSize: '0.85rem', color: '#a3a3a3', textTransform: 'uppercase', letterSpacing: '1px' }}>Built</span>
              <span style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>1900</span>
            </div>

            <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
              <span style={{ fontSize: '0.85rem', color: '#a3a3a3', textTransform: 'uppercase', letterSpacing: '1px' }}>Interior</span>
              <span style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>2,286 sqft</span>
            </div>
            
            <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
              <span style={{ fontSize: '0.85rem', color: '#a3a3a3', textTransform: 'uppercase', letterSpacing: '1px' }}>Lot Size</span>
              <span style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>8,712 sqft</span>
            </div>

            <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
              <span style={{ fontSize: '0.85rem', color: '#a3a3a3', textTransform: 'uppercase', letterSpacing: '1px' }}>Layout</span>
              <span style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>4 Bed / 2 Bath</span>
            </div>

             <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
              <span style={{ fontSize: '0.85rem', color: '#a3a3a3', textTransform: 'uppercase', letterSpacing: '1px' }}>Heating</span>
              <span style={{ fontSize: '1.2rem', fontWeight: 'bold' }}>Gas</span>
            </div>

          </div>
        </div>

        {/* --- MISSION & RULES CARD --- */}
        <div 
          className="animate-slide-in"
          style={{
            maxWidth: '800px',
            width: '100%',
            backgroundColor: 'rgba(0, 0, 0, 0.6)', 
            backdropFilter: 'blur(20px)',
            WebkitBackdropFilter: 'blur(20px)',
            borderRadius: '30px',
            padding: '3rem',
            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5)',
            border: '1px solid rgba(255, 255, 255, 0.1)',
            color: 'white',
            marginBottom: '4rem'
          }}
        >
          <h2 style={{ color: 'var(--sandy-brown)', fontSize: '2rem', fontWeight: 'bold', marginBottom: '1.5rem' }}>
            The Mission
          </h2>
          
          <p style={{ lineHeight: '1.8', marginBottom: '2rem', fontSize: '1.1rem', color: '#e5e5e5' }}>
            Welcome to the 212 May Street companion app. We built this in an endeavour to help make communal living feel fun, easier, funnier, and more connected. Whether it's coordinating the next movie night, figuring out whose turn it is to buy milk, making a big announcement or just sharing a meme in the house chat, this is your digital home base, a full-blown dashboard for your daily lives.
          </p>

          <hr style={{ border: 'none', borderTop: '2px dashed rgba(255,255,255,0.2)', margin: '2rem 0' }} />

          <h3 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '0.5rem', color: 'var(--sky-blue)' }}>
            House Rules
          </h3>
          <p style={{ fontSize: '0.9rem', color: '#a3a3a3', marginBottom: '1.5rem', fontStyle: 'italic' }}>
            (Subject to reg updates)
          </p>

          <ul style={{ listStyle: 'none', padding: 0, display: 'grid', gap: '1rem', color: '#e5e5e5' }}>
            <li style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
              <span style={{ fontSize: '1.5rem' }}>üßº</span> 
              <span style={{ fontSize: '1.1rem' }}>Leave the common areas cleaner than you found them.</span>
            </li>
            <li style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
              <span style={{ fontSize: '1.5rem' }}>üéß</span> 
              <span style={{ fontSize: '1.1rem' }}>Quiet hours after 9 PM (unless it's a party).</span>
            </li>
            <li style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
              <span style={{ fontSize: '1.5rem' }}>‚ù§Ô∏è</span> 
              <span style={{ fontSize: '1.1rem' }}>Show kindness and consider each other!</span>
            </li>
          </ul>
        </div>

        {/* --- MEET THE FAM --- */}
        <div style={{ width: '100%', maxWidth: '1200px' }}>
          <h2 className="animate-fade-in" style={{ 
            textAlign: 'center', 
            color: 'white', 
            fontSize: '2.5rem', 
            fontWeight: 'bold', 
            marginBottom: '3rem', 
            textShadow: '0 2px 5px rgba(0,0,0,0.5)' 
          }}>
            Meet the Fam
          </h2>
          
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '2rem', justifyContent: 'center' }}>
            {family.map((person, index) => (
              <div 
                key={index}
                className="animate-slide-in"
                style={{
                  flex: '1 1 350px', 
                  backgroundColor: 'rgba(0, 0, 0, 0.7)',
                  backdropFilter: 'blur(15px)',
                  WebkitBackdropFilter: 'blur(15px)',
                  borderRadius: '25px',
                  padding: '2rem',
                  border: '1px solid rgba(255,255,255,0.1)',
                  boxShadow: '0 10px 30px rgba(0,0,0,0.5)',
                  color: 'white',
                  display: 'flex',
                  flexDirection: 'column',
                  gap: '1rem',
                  animationDelay: `${index * 0.2}s` 
                }}
              >
                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>
                  <div style={{ 
                    backgroundColor: 'rgba(255,255,255,0.1)', 
                    padding: '12px', 
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center'
                  }}>
                    {person.icon}
                  </div>
                  <div>
                    <h3 style={{ margin: 0, fontSize: '1.25rem', fontWeight: 'bold' }}>{person.name}</h3>
                    <span style={{ color: 'var(--sky-blue)', fontSize: '0.9rem', fontWeight: 'bold', textTransform: 'uppercase' }}>
                      {person.role}
                    </span>
                  </div>
                </div>

                <div style={{ alignSelf: 'flex-start' }}>
                   <span style={{ 
                     backgroundColor: 'rgba(255,255,255,0.15)', 
                     padding: '4px 12px', 
                     borderRadius: '20px', 
                     fontSize: '0.85rem',
                     fontWeight: 'bold',
                     color: '#e5e5e5'
                   }}>
                     Age: {person.age}
                   </span>
                </div>

                <p style={{ lineHeight: '1.6', color: '#d4d4d4', flex: 1 }}>
                  {person.desc}
                </p>

              </div>
            ))}
          </div>
        </div>

      </div>
    </main>
  );
}
</file>

<file path="app/mates/page.tsx">
/**
 * file: app/mates/page.tsx
 * description: Displays housemates with their Birthday (MM/DD) on the card.
 */

"use client";

import React, { useEffect, useState } from 'react';
import { User as UserIcon, Shield, Sparkles, Calendar, Cake } from 'lucide-react';
import { getUsers, User } from '../actions';

export default function Mates() {
  const [mates, setMates] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const loadMates = async () => {
      const data = await getUsers();
      setMates(data);
      setLoading(false);
    };
    loadMates();
  }, []);

  const formatJoinedDate = (isoString: string) => {
    return new Date(isoString).toLocaleDateString('en-US', { 
      month: 'short', 
      year: 'numeric' 
    });
  };

  // Helper to turn "YYYY-MM-DD" into "MM/DD"
  const formatBirthday = (dobString?: string) => {
    if (!dobString) return "N/A";
    // Split string to avoid timezone issues with Date() parsing
    const parts = dobString.split('-'); // [YYYY, MM, DD]
    if (parts.length === 3) {
      return `${parts[1]}/${parts[2]}`; // MM/DD
    }
    return dobString;
  };

  return (
    <main style={{ minHeight: '100vh', padding: '2rem 1rem', paddingBottom: '8rem' }}>
      <div style={{ maxWidth: '1000px', margin: '0 auto' }}>
        
        {/* Header */}
        <div style={{ textAlign: 'center', marginBottom: '3rem' }}>
          <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold', color: 'var(--sandy-brown)', marginBottom: '0.5rem' }}>
            House Mates
          </h1>
          <p style={{ color: 'gray' }}>Meet the neighbors.</p>
        </div>

        {/* Loading State */}
        {loading && (
          <div style={{ textAlign: 'center', color: '#94a3b8', padding: '2rem' }}>
            Loading directory...
          </div>
        )}

        {/* Mates Grid */}
        <div className="animate-fade-in" style={{ 
          display: 'grid', 
          gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', 
          gap: '1.5rem' 
        }}>
          {mates.map((mate) => (
            <div key={mate.id} style={{ 
              backgroundColor: 'white', 
              borderRadius: '24px', 
              padding: '2rem', 
              boxShadow: '0 10px 30px rgba(0,0,0,0.05)', 
              border: '1px solid #f1f5f9',
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              textAlign: 'center',
              transition: 'transform 0.2s',
              cursor: 'default'
            }}
            onMouseOver={(e) => e.currentTarget.style.transform = 'translateY(-5px)'}
            onMouseOut={(e) => e.currentTarget.style.transform = 'translateY(0)'}
            >
              
              {/* Avatar Circle */}
              <div style={{ 
                width: '80px', height: '80px', 
                backgroundColor: '#e0f2fe', 
                borderRadius: '50%', 
                display: 'flex', alignItems: 'center', justifyContent: 'center',
                marginBottom: '1rem',
                color: '#0284c7'
              }}>
                <UserIcon size={40} />
              </div>

              {/* Name & Alias */}
              <h3 style={{ margin: '0 0 5px 0', fontSize: '1.25rem', fontWeight: 'bold', color: '#1e293b' }}>
                {mate.firstName} {mate.lastName}
              </h3>
              
              {mate.alias && (
                <div style={{ display: 'flex', alignItems: 'center', gap: '5px', color: 'var(--sandy-brown)', fontWeight: 'bold', fontSize: '0.9rem', marginBottom: '1rem' }}>
                  <Sparkles size={14} /> {mate.alias}
                </div>
              )}

              {/* Divider */}
              <div style={{ width: '100%', height: '1px', backgroundColor: '#e2e8f0', margin: '1rem 0' }} />

              {/* Details */}
              <div style={{ width: '100%', display: 'flex', flexDirection: 'column', gap: '0.8rem' }}>
                
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', color: '#64748b', fontSize: '0.9rem' }}>
                    <Shield size={16} /> Role
                  </div>
                  <span style={{ fontWeight: 'bold', color: '#334155', fontSize: '0.95rem' }}>{mate.role}</span>
                </div>

                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', color: '#64748b', fontSize: '0.9rem' }}>
                    <Calendar size={16} /> Joined
                  </div>
                  <span style={{ fontWeight: 'bold', color: '#334155', fontSize: '0.95rem' }}>{formatJoinedDate(mate.joinedAt)}</span>
                </div>

                {/* BIRTHDAY DISPLAY */}
                {mate.dob && (
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', color: '#64748b', fontSize: '0.9rem' }}>
                      <Cake size={16} /> Birthday
                    </div>
                    <span style={{ fontWeight: 'bold', color: '#334155', fontSize: '0.95rem' }}>
                      {formatBirthday(mate.dob)}
                    </span>
                  </div>
                )}

              </div>

            </div>
          ))}
        </div>

        {!loading && mates.length === 0 && (
          <div style={{ textAlign: 'center', color: '#94a3b8', padding: '2rem' }}>
            No housemates found. Strange... is the house empty? üëª
          </div>
        )}

      </div>
    </main>
  );
}
</file>

<file path="app/posts-db.json">
[
  {
    "id": 1768048167773,
    "author": "idongcodes",
    "content": "You guys have no idea how excited I am to see you all start using this üöÄüëÄüôå",
    "timestamp": "2026-01-10T12:29:27.773Z"
  },
  {
    "id": 1768047956509,
    "author": "idongcodes",
    "content": "I'm really excited to see where this goes ! üò≠",
    "timestamp": "2026-01-10T12:25:56.509Z"
  }
]
</file>

<file path="app/users-db.json">
[
  {
    "id": 1768047885245,
    "firstName": "Idong",
    "lastName": "Essien",
    "alias": "idongcodes",
    "dob": "1986-06-21",
    "role": "Tenant",
    "phone": "16179037216",
    "joinedAt": "2026-01-10T12:24:45.245Z"
  }
]
</file>

<file path="app/components/Header.tsx">
/**
 * file: app/components/Header.tsx
 * description: Replaced text logo with round clickable 'logo+favicon.jpg'.
 */

"use client";

import Link from "next/link";
import Image from "next/image";
import { usePathname } from "next/navigation";

export default function Header() {
  const pathname = usePathname();
  
  // HIDE HEADER on: Home page AND About page
  const isHidden = pathname === "/" || pathname === "/about";

  if (isHidden) return null;

  return (
    <header 
      style={{
        position: 'sticky',
        top: 0,
        zIndex: 1000,
        width: '100%',
        padding: '0.5rem 1rem',
        display: 'flex',
        alignItems: 'center',
        // justify-content: 'center', // Uncomment if you prefer a centered logo
        backgroundColor: 'rgba(135, 206, 235, 0.6)',
        backdropFilter: 'blur(10px)',
        borderBottom: '1px solid rgba(135, 206, 235, 0.3)',
        boxShadow: '0 2px 4px rgba(0,0,0,0.05)'
      }}
    >
      <Link href="/" style={{ display: 'block', borderRadius: '50%', overflow: 'hidden', width: '50px', height: '50px' }}>
        <Image 
          src="/logo+favicon.jpg" 
          alt="212 May St Logo"
          width={50}
          height={50}
          style={{ 
            objectFit: 'cover',
            width: '100%',
            height: '100%'
          }} 
          priority
        />
      </Link>
    </header>
  );
}
</file>

<file path="app/feedback/page.tsx">
/**
 * file: app/feedback/page.tsx
 * description: Feedback list with Admin Toolbar (Read/Unread/Delete).
 */

"use client";

import React, { useState, useEffect } from 'react';
import { User as UserIcon, Trash2, CheckCircle, Circle, Lock } from 'lucide-react';
import { getFeedback, deleteFeedback, toggleFeedbackRead, Feedback } from '../actions';

export default function FeedbackPage() {
  const [feedbackList, setFeedbackList] = useState<Feedback[]>([]);
  const [isAdmin, setIsAdmin] = useState(false);

  useEffect(() => {
    // 1. Check Admin Status
    const storedUser = sessionStorage.getItem('212user');
    if (storedUser) {
      const user = JSON.parse(storedUser);
      if (user.alias === 'idongcodes') {
        setIsAdmin(true);
      }
    }

    // 2. Load Data
    const loadFeedback = async () => {
      const data = await getFeedback();
      setFeedbackList(data);
    };
    loadFeedback();
  }, []);

  const handleDelete = async (id: number) => {
    if (!confirm("Delete this feedback?")) return;
    setFeedbackList(feedbackList.filter(f => f.id !== id)); // Optimistic
    await deleteFeedback(id);
  };

  const handleToggleRead = async (id: number, currentStatus: boolean | undefined) => {
    const newStatus = !currentStatus;
    setFeedbackList(feedbackList.map(f => f.id === id ? { ...f, read: newStatus } : f)); // Optimistic
    await toggleFeedbackRead(id, newStatus);
  };

  const formatDate = (isoString: string) => {
    return new Date(isoString).toLocaleDateString([], { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
  };

  return (
    <main style={{ minHeight: '100vh', padding: '2rem 1rem', paddingBottom: '8rem' }}>
      <div style={{ maxWidth: '600px', margin: '0 auto' }}>
        
        {/* HEADER */}
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <h1 style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--sandy-brown)' }}>House Feedback</h1>
          <p style={{ color: 'gray' }}>A log of suggestions and reports.</p>
        </div>

        {/* FEEDBACK LIST VIEW */}
        <div>
          <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
            {feedbackList.length === 0 ? (
              <div style={{ textAlign: 'center', color: '#94a3b8', padding: '2rem', fontStyle: 'italic' }}>
                No feedback submitted yet.
              </div>
            ) : (
              feedbackList.map((item) => (
                <div key={item.id} style={{ 
                  backgroundColor: item.read ? '#f8fafc' : 'white', // Dim if read
                  opacity: item.read ? 0.7 : 1,
                  padding: '1.5rem', 
                  borderRadius: '20px', 
                  border: item.read ? '1px solid #e2e8f0' : '1px solid #cbd5e1',
                  boxShadow: '0 4px 6px rgba(0,0,0,0.02)',
                  position: 'relative',
                  transition: 'all 0.3s'
                }}>
                  
                  {/* ADMIN TOOLBAR */}
                  {isAdmin && (
                    <div style={{ 
                      position: 'absolute', 
                      top: '10px', 
                      right: '10px', 
                      display: 'flex', 
                      gap: '8px',
                      backgroundColor: 'rgba(255,255,255,0.8)',
                      padding: '5px',
                      borderRadius: '12px',
                      border: '1px solid #e2e8f0'
                    }}>
                      <button 
                        onClick={() => handleToggleRead(item.id, item.read)}
                        title={item.read ? "Mark Unread" : "Mark Read"}
                        style={{ background: 'none', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center' }}
                      >
                        {item.read ? <CheckCircle size={18} color="#10b981" /> : <Circle size={18} color="#94a3b8" />}
                      </button>
                      
                      <button 
                        onClick={() => handleDelete(item.id)}
                        title="Delete"
                        style={{ background: 'none', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center' }}
                      >
                        <Trash2 size={18} color="#ef4444" />
                      </button>
                    </div>
                  )}

                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '0.5rem', paddingRight: isAdmin ? '60px' : '0' }}>
                    <h4 style={{ margin: 0, fontSize: '1.1rem', fontWeight: 'bold', color: '#1e293b' }}>{item.subject}</h4>
                  </div>
                   <span style={{ fontSize: '0.8rem', color: '#94a3b8', display: 'block', marginBottom: '0.5rem' }}>{formatDate(item.submittedAt)}</span>
                  
                  <p style={{ color: '#475569', lineHeight: '1.5', margin: '0 0 1rem 0' }}>{item.message}</p>
                  
                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                    <div style={{ width: '24px', height: '24px', borderRadius: '50%', backgroundColor: '#e0f2fe', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                      <UserIcon size={14} color="#0284c7" />
                    </div>
                    <span style={{ fontSize: '0.85rem', color: '#64748b', fontWeight: '500' }}>
                      {item.name} <span style={{ fontWeight: 'normal', opacity: 0.7 }}>({item.role})</span>
                    </span>
                  </div>
                </div>
              ))
            )}
          </div>
        </div>

      </div>
    </main>
  );
}
</file>

<file path="app/join/page.tsx">
/**
 * file: app/join/page.tsx
 * description: Added Date of Birth field to registration form.
 */

"use client";

import React, { useState } from 'react';
import { User, Phone, Key, ShieldCheck, ChevronRight, AlertCircle, Loader2, Sparkles, Calendar } from 'lucide-react';
import Link from 'next/link';
import { useRouter } from 'next/navigation';
import { registerUser } from '../actions';

export default function Join() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    firstName: "",
    lastName: "",
    alias: "",
    dob: "", // <--- NEW STATE
    role: "Tenant",
    phone: "",
    doorCode: ""
  });
  
  const [status, setStatus] = useState<'idle' | 'loading' | 'error' | 'success'>('idle');
  const [errorMessage, setErrorMessage] = useState("");

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
    
    if (status === 'error') {
      setStatus('idle');
      setErrorMessage("");
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setStatus('loading');

    const result = await registerUser(formData);

    if (result.success && result.user) {
      sessionStorage.setItem('212user', JSON.stringify(result.user));
      
      setStatus('success');
      setTimeout(() => {
        router.push('/common-room'); 
      }, 1500);
    } else {
      setStatus('error');
      setErrorMessage(result.message || "Something went wrong");
    }
  };

  return (
    <main style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: '2rem', backgroundColor: '#f0f9ff' }}>
      
      <div className="animate-fade-in" style={{ width: '100%', maxWidth: '400px' }}>
        
        {/* Header */}
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <div style={{ 
            width: '80px', height: '80px', margin: '0 auto 1rem auto', 
            backgroundColor: status === 'success' ? 'var(--light-green)' : 'var(--sandy-brown)', 
            borderRadius: '50%', 
            display: 'flex', alignItems: 'center', justifyContent: 'center',
            boxShadow: '0 10px 25px rgba(244, 164, 96, 0.4)',
            transition: 'background-color 0.5s'
          }}>
            <ShieldCheck size={40} color={status === 'success' ? '#171717' : 'white'} />
          </div>
          <h1 style={{ fontSize: '2rem', fontWeight: 'bold', color: '#1e293b', marginBottom: '0.5rem' }}>Join the House</h1>
          <p style={{ color: '#64748b' }}>Enter your info to get access.</p>
        </div>

        {/* Form Card */}
        <div style={{ 
          backgroundColor: 'white', 
          padding: '2rem', 
          borderRadius: '24px', 
          boxShadow: '0 20px 40px rgba(0,0,0,0.05)',
          border: status === 'error' ? '2px solid #ef4444' : '1px solid #e2e8f0',
          transition: 'border-color 0.3s'
        }}>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1.25rem' }}>
            
            {/* Name Fields Row */}
            <div style={{ display: 'flex', gap: '1rem' }}>
              <div style={{ flex: 1 }}>
                <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>First Name</label>
                <div style={{ position: 'relative' }}>
                  <User size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                  <input 
                    type="text" 
                    name="firstName" 
                    placeholder="Jane"
                    required
                    value={formData.firstName}
                    onChange={handleChange}
                    style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none' }} 
                  />
                </div>
              </div>
              <div style={{ flex: 1 }}>
                <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Last Name</label>
                <input 
                  type="text" 
                  name="lastName" 
                  placeholder="Doe"
                  required
                  value={formData.lastName}
                  onChange={handleChange}
                  style={{ width: '100%', padding: '12px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none' }} 
                />
              </div>
            </div>

            {/* Alias Field */}
            <div>
               <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'flex', justifyContent: 'space-between' }}>
                 <span>Alias <span style={{fontWeight: 'normal', color: '#94a3b8'}}>(Optional)</span></span>
               </label>
               <div style={{ position: 'relative' }}>
                  <Sparkles size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                  <input 
                    type="text" 
                    name="alias" 
                    placeholder="e.g. 'The Chef'"
                    value={formData.alias}
                    onChange={handleChange}
                    style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none' }} 
                  />
               </div>
            </div>

            {/* Date of Birth Field */}
            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Date of Birth</label>
              <div style={{ position: 'relative' }}>
                <Calendar size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', pointerEvents: 'none' }} />
                <input 
                  type="date" 
                  name="dob" 
                  required
                  value={formData.dob}
                  onChange={handleChange}
                  style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none', color: '#1e293b' }} 
                />
              </div>
            </div>

            {/* Role Selection */}
            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Role</label>
              <div style={{ position: 'relative' }}>
                <select 
                  name="role" 
                  value={formData.role} 
                  onChange={handleChange}
                  style={{ width: '100%', padding: '12px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none', backgroundColor: 'white', appearance: 'none' }}
                >
                  <option value="Tenant">Tenant</option>
                  <option value="Landlord">Landlord</option>
                  <option value="First Lady">First Lady</option>
                </select>
                <div style={{ position: 'absolute', right: '12px', top: '50%', transform: 'translateY(-50%)', pointerEvents: 'none' }}>
                  <ChevronRight size={16} color="#94a3b8" style={{ transform: 'rotate(90deg)' }} />
                </div>
              </div>
            </div>

            {/* Phone Number */}
            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Phone Number</label>
              <div style={{ position: 'relative' }}>
                <Phone size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                <input 
                  type="tel" 
                  name="phone" 
                  placeholder="(508) 555-0123"
                  required
                  value={formData.phone}
                  onChange={handleChange}
                  style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none' }} 
                />
              </div>
            </div>

            {/* Door Code */}
            <div>
              <label style={{ fontSize: '0.85rem', fontWeight: 'bold', color: '#475569', marginBottom: '5px', display: 'block' }}>Door Code</label>
              <div style={{ position: 'relative' }}>
                <Key size={18} color="#94a3b8" style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)' }} />
                <input 
                  type="password" 
                  name="doorCode" 
                  placeholder="Enter the 4-digit code"
                  required
                  value={formData.doorCode}
                  onChange={handleChange}
                  maxLength={4}
                  style={{ width: '100%', padding: '12px 12px 12px 40px', borderRadius: '12px', border: '1px solid #cbd5e1', fontSize: '1rem', outline: 'none', letterSpacing: '2px' }} 
                />
              </div>
              
              {status === 'error' && (
                <div className="animate-slide-in" style={{ display: 'flex', alignItems: 'center', gap: '5px', marginTop: '10px', color: '#ef4444', fontSize: '0.9rem', fontWeight: 'bold' }}>
                  <AlertCircle size={16} />
                  {errorMessage}
                </div>
              )}
            </div>

            {/* Submit Button */}
            <button 
              type="submit" 
              disabled={status === 'loading' || status === 'success'}
              style={{ 
                marginTop: '1rem',
                backgroundColor: status === 'success' ? 'var(--light-green)' : 'var(--sky-blue)', 
                color: status === 'success' ? '#171717' : 'white', 
                border: 'none', 
                padding: '16px', 
                borderRadius: '12px', 
                fontSize: '1.1rem', 
                fontWeight: 'bold', 
                cursor: 'pointer',
                transition: 'all 0.2s',
                boxShadow: '0 4px 12px rgba(135, 206, 235, 0.4)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '10px'
              }}
            >
              {status === 'loading' ? (
                <>Unlocking <Loader2 className="animate-spin" size={20}/></>
              ) : status === 'success' ? (
                "Success! Redirecting..."
              ) : (
                "Unlock & Join"
              )}
            </button>
          </form>

          <div style={{ marginTop: '1.5rem', textAlign: 'center' }}>
            <Link href="/" style={{ fontSize: '0.9rem', color: '#64748b', textDecoration: 'none' }}>
              ‚Üê Back to Home
            </Link>
          </div>

        </div>
      </div>
    </main>
  );
}
</file>

<file path="app/feedback-db.json">
[
  {
    "id": 1767915877558,
    "name": "Idong",
    "role": "Tenant",
    "subject": "Chat Feature ?",
    "message": "I'd love a real time chat feature !",
    "submittedAt": "2026-01-08T23:44:37.558Z",
    "read": false
  }
]
</file>

<file path="app/components/Footer.tsx">
/**
 * file: app/components/Footer.tsx
 * description: Added donation modal with links to PayPal, Venmo, and Cash App.
 */

"use client";

import { useState } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { X, CreditCard, Banknote, Send, Heart } from "lucide-react";

export default function Footer() {
  const pathname = usePathname();
  const isAbout = pathname === "/about";
  const [isModalOpen, setIsModalOpen] = useState(false);

  // Helper to close modal when clicking outside content
  const handleOverlayClick = (e: React.MouseEvent) => {
    if (e.target === e.currentTarget) {
      setIsModalOpen(false);
    }
  };

  return (
    <>
      <footer 
        style={{
          width: '100%',
          backgroundColor: isAbout ? 'transparent' : 'var(--sky-blue)', 
          color: 'white',
          padding: '3rem 1rem 8rem 1rem', 
          textAlign: 'center',
          marginTop: 'auto', 
          borderTop: isAbout ? 'none' : '4px solid rgba(255,255,255,0.2)' 
        }}
      >
        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
          <p style={{ margin: 0, fontWeight: 'bold', fontSize: '1.1rem' }}>
            &copy; {new Date().getFullYear()} 212 May Street
          </p>
          <p style={{ margin: 0, opacity: 0.9 }}>
            Built with ü´∂ by{" "}
            <Link 
              href="https://idong-essien.vercel.app" 
              target="_blank" 
              style={{ 
                fontWeight: 'bold', 
                color: 'white', 
                textDecoration: 'underline',
                textUnderlineOffset: '4px'
              }}
            >
              idongCodes
            </Link>
          </p>
          
          {/* Donation Trigger */}
          <p 
            onClick={() => setIsModalOpen(true)}
            style={{ 
              marginTop: '1rem', 
              fontSize: '0.85rem', 
              opacity: 0.8, 
              cursor: 'pointer',
              textDecoration: 'underline dotted',
              transition: 'opacity 0.2s'
            }}
            className="hover:opacity-100"
          >
            Consider donating here & there to help keep this project going.
          </p>
        </div>
      </footer>

      {/* DONATION MODAL */}
      {isModalOpen && (
        <div 
          onClick={handleOverlayClick}
          style={{
            position: 'fixed',
            top: 0, left: 0, right: 0, bottom: 0,
            backgroundColor: 'rgba(0,0,0,0.6)',
            backdropFilter: 'blur(5px)',
            zIndex: 9999,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            padding: '1rem'
          }}
          className="animate-fade-in"
        >
          <div style={{
            backgroundColor: 'white',
            color: '#1e293b',
            padding: '2rem',
            borderRadius: '24px',
            width: '100%',
            maxWidth: '350px',
            position: 'relative',
            boxShadow: '0 20px 50px rgba(0,0,0,0.3)',
            animation: 'slideIn 0.3s ease-out'
          }}>
            
            {/* Close Button */}
            <button 
              onClick={() => setIsModalOpen(false)}
              style={{
                position: 'absolute',
                top: '15px',
                right: '15px',
                background: '#f1f5f9',
                border: 'none',
                borderRadius: '50%',
                padding: '8px',
                cursor: 'pointer',
                color: '#64748b'
              }}
            >
              <X size={20} />
            </button>

            {/* Header */}
            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
              <div style={{ 
                margin: '0 auto 1rem auto', 
                width: '60px', height: '60px', 
                backgroundColor: '#ffe4e6', 
                borderRadius: '50%', 
                display: 'flex', alignItems: 'center', justifyContent: 'center' 
              }}>
                <Heart size={30} color="#fb7185" fill="#fb7185" />
              </div>
              <h3 style={{ fontSize: '1.5rem', fontWeight: 'bold', margin: '0 0 0.5rem 0' }}>Support the Dev</h3>
              <p style={{ color: '#64748b', fontSize: '0.95rem', lineHeight: '1.5', margin: 0 }}>
                Thanks for keeping the lights on! Choose your preferred app below.
              </p>
            </div>

            {/* Links Grid */}
            <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
              
              {/* PayPal */}
              <a 
                href="https://paypal.me/idongcodes" 
                target="_blank" 
                rel="noopener noreferrer"
                style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '15px',
                  padding: '16px',
                  backgroundColor: '#0070ba', // PayPal Blue
                  color: 'white',
                  borderRadius: '16px',
                  textDecoration: 'none',
                  fontWeight: 'bold',
                  boxShadow: '0 4px 10px rgba(0, 112, 186, 0.2)'
                }}
              >
                <CreditCard size={24} />
                <span>PayPal</span>
              </a>

              {/* Venmo */}
              <a 
                href="https://www.venmo.com/u/idongcodes" 
                target="_blank" 
                rel="noopener noreferrer"
                style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '15px',
                  padding: '16px',
                  backgroundColor: '#008CFF', // Venmo Blue
                  color: 'white',
                  borderRadius: '16px',
                  textDecoration: 'none',
                  fontWeight: 'bold',
                  boxShadow: '0 4px 10px rgba(0, 140, 255, 0.2)'
                }}
              >
                <Send size={24} />
                <span>Venmo</span>
              </a>

              {/* Cash App */}
              <a 
                href="https://cash.app/$richardxessien" 
                target="_blank" 
                rel="noopener noreferrer"
                style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '15px',
                  padding: '16px',
                  backgroundColor: '#00D632', // CashApp Green
                  color: 'white',
                  borderRadius: '16px',
                  textDecoration: 'none',
                  fontWeight: 'bold',
                  boxShadow: '0 4px 10px rgba(0, 214, 50, 0.2)'
                }}
              >
                <Banknote size={24} />
                <span>Cash App</span>
              </a>

            </div>
          </div>
        </div>
      )}
    </>
  );
}
</file>

<file path="app/components/Navigation.tsx">
/**
 * file: app/components/Navigation.tsx
 * description: Restricts navigation items for guests (Home & Login only).
 */

"use client";

import Link from "next/link";
import { usePathname, useRouter } from "next/navigation";
import { Home, Armchair, Bed, Users, Bell, Info, MessageCircle, LogOut, LogIn } from "lucide-react";
import { useEffect, useState } from "react";

export default function Navigation() {
  const pathname = usePathname();
  const router = useRouter();
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  useEffect(() => {
    // Check login status on mount and path change
    const checkLogin = () => {
      const user = sessionStorage.getItem('212user');
      setIsLoggedIn(!!user);
    };
    checkLogin();
  }, [pathname]);

  const handleLogout = () => {
    sessionStorage.removeItem('212user');
    setIsLoggedIn(false);
    router.push('/');
  };

  const isActive = (path: string) => pathname === path;

  const getLinkStyle = (path: string) => ({
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    color: isActive(path) ? 'var(--sandy-brown)' : '#9ca3af',
    fontWeight: isActive(path) ? 'bold' : 'normal',
    transition: 'color 0.2s ease',
    background: 'none',
    border: 'none',
    cursor: 'pointer',
    padding: 0
  });

  return (
    <>
      <nav 
        style={{
          position: 'fixed',
          bottom: '1.5rem',
          left: '50%',
          transform: 'translateX(-50%)', // Center the nav
          zIndex: 100,
          display: 'flex',
          gap: '20px',
          alignItems: 'center',
          backgroundColor: 'rgba(255, 255, 255, 0.95)',
          backdropFilter: 'blur(10px)',
          border: '1px solid rgba(255,255,255,0.3)',
          borderRadius: '50px',
          padding: '12px 25px',
          boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'
        }}
      >
        {/* ALWAYS VISIBLE: Home */}
        <Link href="/" style={getLinkStyle("/")} title="Home"><Home size={24} /></Link>
        
        {/* AUTHENTICATED ONLY LINKS */}
        {isLoggedIn && (
          <>
            <Link href="/common-room" style={getLinkStyle("/common-room")} title="Common Room"><Armchair size={24} /></Link>
            <Link href="/my-room" style={getLinkStyle("/my-room")} title="My Room"><Bed size={24} /></Link>
            <Link href="/mates" style={getLinkStyle("/mates")} title="Mates"><Users size={24} /></Link>
            <Link href="/notifications" style={getLinkStyle("/notifications")} title="Notifications"><Bell size={24} /></Link>
            <Link href="/about" style={getLinkStyle("/about")} title="About"><Info size={24} /></Link>
          </>
        )}

        {/* SEPARATOR (Only if logged in to separate logout) */}
        <div style={{ width: '1px', height: '24px', backgroundColor: '#e2e8f0' }}></div>

        {/* LOGIN / LOGOUT TOGGLE */}
        {isLoggedIn ? (
          <button 
            onClick={handleLogout} 
            style={getLinkStyle("logout")} 
            title="Log Out"
          >
            <LogOut size={24} color="#ef4444" />
          </button>
        ) : (
          <Link 
            href="/login" 
            style={getLinkStyle("/login")}
            title="Log In"
          >
            <LogIn size={24} color="var(--sky-blue)" />
          </Link>
        )}
      </nav>

      {/* CHAT BUTTON - Only show if Logged In */}
      {isLoggedIn && (
        <Link
          href="/chat"
          style={{
            position: 'fixed',
            bottom: '6rem', // Moved up slightly to avoid overlap
            right: '1rem',
            zIndex: 100,
            height: '56px',
            width: '56px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            backgroundColor: 'var(--light-green)',
            color: isActive("/chat") ? 'white' : '#171717',
            borderRadius: '50%',
            boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
            border: isActive("/chat") ? '2px solid white' : 'none'
          }}
        >
          <MessageCircle size={28} />
        </Link>
      )}
    </>
  );
}
</file>

<file path="app/praise-db.json">
[
  {
    "id": 1768057826609,
    "name": "Idong",
    "role": "Tenant",
    "subject": "üöÄ ü•Ç",
    "message": "Excited to be working on this app. I hope you all enjoy it and come to use it daily üí™üèΩ",
    "submittedAt": "2026-01-10T15:10:26.609Z"
  }
]
</file>

<file path="package.json">
{
  "name": "212mayst",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "lucide-react": "^0.562.0",
    "next": "16.1.1",
    "react": "19.2.3",
    "react-dom": "19.2.3"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.1.1",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
</file>

<file path="app/common-room/page.tsx">
/**
 * file: app/common-room/page.tsx
 * description: Posts now display date in mm/dd/yyyy format + time.
 */

"use client";

import React, { useState, useRef, useEffect } from 'react';
import { Send, Camera, Image as ImageIcon, Smile, User, Pencil, X, Check, Trash2 } from 'lucide-react';
import { addPost, getPosts, editPost, deletePost, Post } from '../actions';
import Link from 'next/link';

const COMMON_EMOJIS = ["üòÄ", "üòÇ", "üòç", "ü•≥", "üòé", "üò≠", "üò°", "ü§î", "üëç", "üëé", "üî•", "‚ù§Ô∏è", "‚ú®", "üéâ", "üè†", "üç∫", "üçï", "üåÆ", "üëÄ", "üöÄ", "üí°", "üí™", "üò¥", "üëã", "üíØ", "üôå", "üíÄ", "üí©", "ü¶Ñ", "üåà", "üéà", "üéÅ"];
const MAX_CHARS = 250;

export default function CommonRoom() {
  const [posts, setPosts] = useState<Post[]>([]);
  const [message, setMessage] = useState("");
  const [showEmojiPicker, setShowEmojiPicker] = useState(false);
  const [loading, setLoading] = useState(false);
  
  const [editingId, setEditingId] = useState<number | null>(null);
  const [editText, setEditText] = useState("");
  const [saveLoading, setSaveLoading] = useState(false);
  
  const [authorName, setAuthorName] = useState("Guest");
  const [isGuest, setIsGuest] = useState(true);
  const [isAdmin, setIsAdmin] = useState(false); 

  const cameraInputRef = useRef<HTMLInputElement>(null);
  const uploadInputRef = useRef<HTMLInputElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);
  const editInputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    const loadPosts = async () => {
      const data = await getPosts();
      setPosts(data);
    };
    loadPosts();

    const storedUser = sessionStorage.getItem('212user');
    if (storedUser) {
      const user = JSON.parse(storedUser);
      setAuthorName(user.alias || user.firstName);
      setIsGuest(false);
      if (user.alias === 'idongcodes') setIsAdmin(true);
    }
  }, []);

  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto'; 
      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; 
    }
  }, [message]);

  useEffect(() => { if (editingId && editInputRef.current) editInputRef.current.focus(); }, [editingId]);

  const handleCameraClick = () => cameraInputRef.current?.click();
  const handleUploadClick = () => uploadInputRef.current?.click();
  const handleEmojiClick = (emoji: string) => { if (message.length + emoji.length <= MAX_CHARS) setMessage(prev => prev + emoji); };
  
  const handlePostSubmit = async () => {
    if (!message.trim()) return;
    setLoading(true);
    const newPost: Post = { id: Date.now(), author: authorName, content: message.trim(), timestamp: new Date().toISOString(), editCount: 0 };
    setPosts([newPost, ...posts]);
    setMessage("");
    setShowEmojiPicker(false);
    if (textareaRef.current) textareaRef.current.style.height = 'auto';
    await addPost(newPost);
    setLoading(false);
  };

  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handlePostSubmit(); } };

  const isEditable = (post: Post) => {
    if ((post.editCount || 0) >= 1) return false;
    return (Date.now() - new Date(post.timestamp).getTime()) < 15 * 60 * 1000;
  };

  const startEditing = (post: Post) => { setEditingId(post.id); setEditText(post.content); };
  const cancelEditing = () => { setEditingId(null); setEditText(""); };
  
  const saveEdit = async () => {
    if (!editingId || !editText.trim()) return;
    setSaveLoading(true);
    const result = await editPost(editingId, editText.trim());
    if (result.success) {
      setPosts(posts.map(p => p.id === editingId ? { ...p, content: editText.trim(), editCount: (p.editCount || 0) + 1 } : p));
      setEditingId(null); setEditText("");
    } else {
      alert(result.message); setEditingId(null);
    }
    setSaveLoading(false);
  };

  const handleDeletePost = async (id: number) => {
    if (!confirm("Admin: Delete this post?")) return;
    setPosts(posts.filter(p => p.id !== id));
    await deletePost(id);
  };

  // UPDATED DATE FORMATTER
  const formatDate = (isoString: string) => {
    const date = new Date(isoString);
    // mm/dd/yyyy, hh:mm am/pm
    return date.toLocaleDateString('en-US', { 
      year: 'numeric', 
      month: '2-digit', 
      day: '2-digit' 
    }) + ', ' + date.toLocaleTimeString('en-US', {
      hour: '2-digit', 
      minute: '2-digit'
    });
  };

  return (
    <main style={{ minHeight: '100vh', padding: '2rem 1rem' }}>
      <div style={{ maxWidth: '800px', margin: '0 auto' }}>
        
        {/* Header & Input UI (Unchanged) */}
        <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
          <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold', color: 'var(--sandy-brown)', marginBottom: '1rem' }}>
            {isGuest ? "Welcome to the Common Room" : `Welcome, ${authorName}`}
          </h1>
          {isGuest ? <p style={{ color: 'gray' }}>You are viewing as a guest. <Link href="/join" style={{ textDecoration: 'underline', color: 'var(--sky-blue)', fontWeight: 'bold' }}>Join the house</Link> to post with your name!</p> : <p style={{ color: 'gray' }}>This is where we hang out. Pull up a chair!</p>}
        </div>

        <div style={{ backgroundColor: 'white', padding: '1.5rem', borderRadius: '20px', boxShadow: '0 10px 20px rgba(0,0,0,0.05)', display: 'flex', flexDirection: 'column', gap: '1rem', position: 'relative', marginBottom: '2rem' }}>
          <div style={{ display: 'flex', gap: '10px', alignItems: 'flex-end' }}>
            <div style={{ position: 'relative', flex: 1, display: 'flex', flexDirection: 'column' }}>
              <textarea ref={textareaRef} placeholder={`What's on your mind, ${authorName}?`} value={message} onChange={(e) => setMessage(e.target.value)} onKeyDown={handleKeyDown} maxLength={MAX_CHARS} rows={1} style={{ width: '100%', padding: '12px 40px 12px 15px', borderRadius: '12px', border: '1px solid #e2e8f0', fontSize: '1rem', backgroundColor: '#f8fafc', outline: 'none', resize: 'none', overflow: 'hidden', minHeight: '48px', fontFamily: 'inherit', lineHeight: '1.5' }} />
              <div style={{ textAlign: 'right', fontSize: '0.75rem', color: message.length >= MAX_CHARS ? '#ef4444' : '#94a3b8', marginTop: '4px', paddingRight: '5px' }}>{message.length}/{MAX_CHARS}</div>
              <button onClick={() => setShowEmojiPicker(!showEmojiPicker)} style={{ position: 'absolute', right: '10px', top: '12px', background: 'none', border: 'none', cursor: 'pointer', color: '#94a3b8', display: 'flex', alignItems: 'center', padding: 0 }}><Smile size={20} /></button>
              {showEmojiPicker && (
                <>
                  <div onClick={() => setShowEmojiPicker(false)} style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', zIndex: 40, cursor: 'default' }} />
                  <div style={{ position: 'absolute', top: '110%', right: 0, zIndex: 50, backgroundColor: 'white', border: '1px solid #e2e8f0', borderRadius: '12px', boxShadow: '0 4px 15px rgba(0,0,0,0.1)', padding: '10px', display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(35px, 1fr))', gap: '5px', width: '100%', minWidth: '250px', maxWidth: '300px', maxHeight: '200px', overflowY: 'auto' }}>
                    {COMMON_EMOJIS.map((emoji) => <button key={emoji} onClick={() => handleEmojiClick(emoji)} style={{ background: 'none', border: 'none', fontSize: '1.5rem', cursor: 'pointer', padding: '5px', borderRadius: '5px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>{emoji}</button>)}
                  </div>
                </>
              )}
            </div>
            <button onClick={handlePostSubmit} disabled={loading} style={{ backgroundColor: 'var(--sandy-brown)', color: 'white', border: 'none', padding: '0 20px', height: '48px', borderRadius: '12px', fontWeight: 'bold', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap', opacity: loading ? 0.7 : 1, alignSelf: 'flex-start' }}>{loading ? '...' : 'Post'} <Send size={18} /></button>
          </div>
          <div style={{ display: 'flex', gap: '20px', paddingLeft: '5px' }}>
            <div onClick={handleCameraClick} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '5px', color: '#64748b' }}><Camera size={24} /></div>
            <div onClick={handleUploadClick} style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '5px', color: '#64748b' }}><ImageIcon size={24} /></div>
          </div>
          <input type="file" ref={cameraInputRef} accept="image/*" capture="environment" hidden />
          <input type="file" ref={uploadInputRef} accept="image/*" hidden />
        </div>

        {/* Feed with new Date Format */}
        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
          {posts.map((post) => (
            <div key={post.id} style={{ backgroundColor: 'white', padding: '1.5rem', borderRadius: '20px', boxShadow: '0 4px 6px rgba(0,0,0,0.02)', border: '1px solid #f1f5f9', display: 'flex', gap: '15px' }}>
              <div style={{ width: '40px', height: '40px', backgroundColor: '#e0f2fe', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0 }}>
                <User size={20} color="#0284c7" />
              </div>
              <div style={{ flex: 1 }}>
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '5px' }}>
                  <div style={{ display: 'flex', alignItems: 'baseline', gap: '10px' }}>
                    <span style={{ fontWeight: 'bold', fontSize: '1rem' }}>{post.author}</span>
                    <span style={{ fontSize: '0.8rem', color: '#94a3b8' }}>
                      {formatDate(post.timestamp)}
                      {(post.editCount || 0) > 0 && <span style={{ marginLeft: '4px', fontStyle: 'italic', fontSize: '0.7rem' }}>(Edited)</span>}
                    </span>
                  </div>
                  <div style={{ display: 'flex', gap: '10px' }}>
                    {!editingId && post.author === authorName && isEditable(post) && (
                      <button onClick={() => startEditing(post)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#cbd5e1', padding: '5px' }} title="Edit"><Pencil size={16} /></button>
                    )}
                    {isAdmin && (
                      <button onClick={() => handleDeletePost(post.id)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#ef4444', padding: '5px' }} title="Admin Delete"><Trash2 size={16} /></button>
                    )}
                  </div>
                </div>
                {editingId === post.id ? (
                  <div className="animate-fade-in" style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                    <input ref={editInputRef} type="text" value={editText} onChange={(e) => setEditText(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && saveEdit()} maxLength={MAX_CHARS} style={{ flex: 1, padding: '8px', borderRadius: '8px', border: '1px solid var(--sky-blue)', outline: 'none' }} />
                    <button onClick={saveEdit} disabled={saveLoading} style={{ background: 'var(--light-green)', border: 'none', borderRadius: '50%', padding: '8px', cursor: 'pointer', color: '#171717' }}><Check size={16} /></button>
                    <button onClick={cancelEditing} style={{ background: '#f1f5f9', border: 'none', borderRadius: '50%', padding: '8px', cursor: 'pointer', color: '#64748b' }}><X size={16} /></button>
                  </div>
                ) : (
                  <p style={{ margin: 0, color: '#334155', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>{post.content}</p>
                )}
              </div>
            </div>
          ))}
          {posts.length === 0 && (<div style={{ textAlign: 'center', color: '#94a3b8', padding: '2rem' }}>No posts yet. Be the first to say hi! üëã</div>)}
        </div>
      </div>
    </main>
  );
}
</file>

<file path="app/actions.ts">
/**
 * file: app/actions.ts
 * description: Server actions for Praise, Feedback, Users (Auth), and Common Room Posts.
 */

"use server";

import fs from "fs/promises";
import path from "path";
import { revalidatePath } from "next/cache";

// ============================================================================
// 1. PRAISE SYSTEM
// ============================================================================

const PRAISE_DB_PATH = path.join(process.cwd(), "app", "praise-db.json");

export type Praise = {
  id: number;
  name: string;
  role: string;
  subject: string;
  message: string;
  submittedAt?: string;
};

const PRAISE_SEED_DATA: Praise[] = [
  { 
    id: 1, 
    name: "Idong", 
    role: "Tenant", 
    subject: "üöÄ ü•Ç", 
    message: "Excited to be working on this app. I hope you all enjoy it and come to use it daily üí™üèΩ" 
  }
];

export async function getPraises(): Promise<Praise[]> {
  try {
    const data = await fs.readFile(PRAISE_DB_PATH, "utf-8");
    return JSON.parse(data);
  } catch (error) {
    // If file doesn't exist, create it with seed data
    await fs.writeFile(PRAISE_DB_PATH, JSON.stringify(PRAISE_SEED_DATA, null, 2));
    return PRAISE_SEED_DATA;
  }
}

export async function addPraise(newPraise: Praise) {
  const praises = await getPraises();

  // Ensure timestamp is present
  const praiseWithDate = {
    ...newPraise,
    submittedAt: newPraise.submittedAt || new Date().toISOString()
  };

  const updatedPraises = [newPraise, ...praises];
  await fs.writeFile(PRAISE_DB_PATH, JSON.stringify(updatedPraises, null, 2));
  revalidatePath("/"); // Refresh Home page
  return updatedPraises;
}

// DELETE PRAISE (Admin)
export async function deletePraise(id: number) {
  const praises = await getPraises();
  const updated = praises.filter(p => p.id !== id);
  await fs.writeFile(PRAISE_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/");
  return updated;
}


// ============================================================================
// 2. FEEDBACK SYSTEM
// ============================================================================

const FEEDBACK_DB_PATH = path.join(process.cwd(), "app", "feedback-db.json");

export type Feedback = {
  id: number;
  name: string;
  role: string;
  subject: string;
  message: string;
  submittedAt: string;
  read?: boolean; // Track read status
};

export async function getFeedback(): Promise<Feedback[]> {
  try {
    const data = await fs.readFile(FEEDBACK_DB_PATH, "utf-8");
    return JSON.parse(data);
  } catch (error) {
    return [];
  }
}

export async function addFeedback(newFeedback: Feedback) {
  const list = await getFeedback();
  // Ensure new feedback starts as unread
  const feedbackWithStatus = { ...newFeedback, read: false };
  const updated = [feedbackWithStatus, ...list];
  await fs.writeFile(FEEDBACK_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/feedback");
  return updated;
}

// DELETE FEEDBACK (Admin)
export async function deleteFeedback(id: number) {
  const list = await getFeedback();
  const updated = list.filter(f => f.id !== id);
  await fs.writeFile(FEEDBACK_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/feedback");
  return updated;
}

// TOGGLE READ STATUS (Admin)
export async function toggleFeedbackRead(id: number, isRead: boolean) {
  const list = await getFeedback();
  const updated = list.map(f => f.id === id ? { ...f, read: isRead } : f);
  await fs.writeFile(FEEDBACK_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/feedback");
  return updated;
}


// ============================================================================
// 3. USER SYSTEM (AUTH & REGISTRATION)
// ============================================================================

const USERS_DB_PATH = path.join(process.cwd(), "app", "users-db.json");

export type User = {
  id: number;
  firstName: string;
  lastName: string;
  alias?: string; // Optional alias
  dob?: string;
  role: string;
  phone: string;
  joinedAt: string;
};

// Response type for Auth actions
type AuthResponse = {
  success: boolean;
  message?: string;
  user?: User;
};

export async function getUsers(): Promise<User[]> {
  try {
    const data = await fs.readFile(USERS_DB_PATH, "utf-8");
    return JSON.parse(data);
  } catch (error) {
    return [];
  }
}

// REGISTER Action
export async function registerUser(formData: any): Promise<AuthResponse> {
  // 1. SECURITY CHECK: Verify Door Code
  if (formData.doorCode !== "0129") {
    return { success: false, message: "‚ùå Incorrect Door Code. Access Denied." };
  }

  // 2. Prepare User Data
  const newUser: User = {
    id: Date.now(),
    firstName: formData.firstName,
    lastName: formData.lastName,
    alias: formData.alias || "",
    dob: formData.dob, 
    role: formData.role,
    phone: formData.phone,
    joinedAt: new Date().toISOString()
  };

  // 3. Save to DB
  const users = await getUsers();
  const updatedUsers = [...users, newUser];
  await fs.writeFile(USERS_DB_PATH, JSON.stringify(updatedUsers, null, 2));
  
  revalidatePath("/mates");
  return { success: true, user: newUser };
}

// LOGIN Action
export async function loginUser(phone: string, doorCode: string): Promise<AuthResponse> {
  // 1. Verify Door Code
  if (doorCode !== "0129") {
    return { success: false, message: "‚ùå Incorrect Door Code." };
  }

  // 2. Find User by Phone
  const users = await getUsers();
  const user = users.find(u => u.phone === phone);

  if (!user) {
    return { success: false, message: "User not found. Check phone number or join first." };
  }

  return { success: true, user };
}


// ============================================================================
// 4. COMMON ROOM POSTS SYSTEM
// ============================================================================

const POSTS_DB_PATH = path.join(process.cwd(), "app", "posts-db.json");

export type Post = {
  id: number;
  author: string;
  content: string;
  timestamp: string;
  editCount: number; // Tracks number of edits (Limit: 1)
};

export async function getPosts(): Promise<Post[]> {
  try {
    const data = await fs.readFile(POSTS_DB_PATH, "utf-8");
    return JSON.parse(data);
  } catch (error) {
    return [];
  }
}

export async function addPost(newPost: Post) {
  const posts = await getPosts();
  
  // Enforce initial state
  const postWithDefaults = { 
    ...newPost, 
    editCount: 0 
  };
  
  const updated = [postWithDefaults, ...posts];
  await fs.writeFile(POSTS_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/common-room");
  return updated;
}

export async function editPost(postId: number, newContent: string) {
  const posts = await getPosts();
  const postIndex = posts.findIndex(p => p.id === postId);

  if (postIndex === -1) {
    return { success: false, message: "Post not found" };
  }

  const post = posts[postIndex];
  
  // CHECK 1: Edit Count Limit (Max 1)
  const currentEdits = post.editCount || 0;
  if (currentEdits >= 1) {
    return { success: false, message: "üö´ Limit reached! You can only edit a post once." };
  }

  // CHECK 2: Time Limit (15 mins)
  const postTime = new Date(post.timestamp).getTime();
  const now = Date.now();
  const fifteenMinutes = 15 * 60 * 1000;

  if ((now - postTime) > fifteenMinutes) {
    return { success: false, message: "‚è≥ Time's up! You can only edit posts within 15 minutes." };
  }

  // Apply Update
  posts[postIndex].content = newContent;
  posts[postIndex].editCount = currentEdits + 1; 
  
  await fs.writeFile(POSTS_DB_PATH, JSON.stringify(posts, null, 2));
  revalidatePath("/common-room");
  return { success: true };
}

// DELETE POST (Admin)
export async function deletePost(id: number) {
  const posts = await getPosts();
  const updated = posts.filter(p => p.id !== id);
  await fs.writeFile(POSTS_DB_PATH, JSON.stringify(updated, null, 2));
  revalidatePath("/common-room");
  return updated;
}
</file>

<file path="app/globals.css">
/* RESET & VARIABLES */
:root {
  --sky-blue: #87CEEB;
  --sandy-brown: #F4A460;
  --light-green: #90EE90;
  --bg-color: #ffffff;
  --text-color: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #0a0a0a;
    --text-color: #ededed;
  }
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  padding-bottom: 100px; /* Space for footer/nav */
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: "Comic Sans MS", "Chalkboard SE", "Comic Neue", sans-serif;
}

/* LINKS */
a {
  text-decoration: none;
  color: inherit;
}

/* ANIMATIONS */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

.animate-fade-in {
  animation: fadeIn 1.5s ease-out forwards;
}

.animate-slide-in {
  opacity: 0;
  animation: slideIn 1s ease-out 0.5s forwards;
}

/* SCROLL ANIMATIONS */
.fade-in-section {
  opacity: 0;
  transform: translateY(30px); /* Start 30px lower */
  transition: opacity 1s ease-out, transform 1s ease-out;
  will-change: opacity, visibility;
}

.fade-in-section.is-visible {
  opacity: 1;
  transform: translateY(0); /* Slide up to original position */
}

/* HERO BUTTONS */
.hero-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 30px;
  border-radius: 50px;
  font-weight: bold;
  font-size: 1rem;
  transition: all 0.3s ease;
  cursor: pointer;
  text-align: center;
}

.hero-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

/* Join Button: Sandy Brown to stand out */
.btn-join {
  background-color: var(--sandy-brown);
  color: white;
  border: 2px solid var(--sandy-brown);
}

/* Login Button: Glassy Outline */
.btn-login {
  background-color: rgba(255, 255, 255, 0.15);
  color: white;
  border: 2px solid white;
  backdrop-filter: blur(5px);
}

.btn-login:hover {
  background-color: white;
  color: var(--sky-blue); /* Text turns blue on white background */
}
</file>

<file path="app/page.tsx">
/**
 * file: app/page.tsx
 * description: Testimonials now show mm/dd/yyyy date + time.
 */

"use client"; 

import React, { useState, useEffect, useRef } from "react"; 
import Link from "next/link";
import { MessageCircle, Calendar, ClipboardList, User, Send, Bug, Lightbulb, Lock, Star, Trash2 } from "lucide-react";
import { getPraises, addPraise, addFeedback, deletePraise, Praise } from "./actions"; // Import Type

// ... [FadeInSection and Imports] ...
function FadeInSection({ children }: { children: React.ReactNode }) {
  const [isVisible, setIsVisible] = useState(false);
  const domRef = useRef<HTMLDivElement>(null);
  useEffect(() => {
    const observer = new IntersectionObserver(entries => { entries.forEach(entry => { if (entry.isIntersecting) setIsVisible(true); }); });
    const currentElement = domRef.current;
    if (currentElement) observer.observe(currentElement);
    return () => { if (currentElement) observer.unobserve(currentElement); };
  }, []);
  return <div ref={domRef} className={`fade-in-section ${isVisible ? 'is-visible' : ''}`} style={{ width: '100%' }}>{children}</div>;
}

export default function Home() {
  const [praises, setPraises] = useState<Praise[]>([]);
  const [loading, setLoading] = useState(true);
  const [user, setUser] = useState<any>(null); 
  const [isAdmin, setIsAdmin] = useState(false); 

  const [praiseForm, setPraiseForm] = useState({ name: "", role: "Tenant", subject: "", message: "" });
  const [feedbackForm, setFeedbackForm] = useState({ name: "", role: "Tenant", subject: "", message: "" });
  const [feedbackStatus, setFeedbackStatus] = useState("idle"); 

  useEffect(() => {
    const loadData = async () => {
      const data = await getPraises();
      setPraises(data);
      setLoading(false);

      const storedUser = sessionStorage.getItem('212user');
      if (storedUser) {
        const parsedUser = JSON.parse(storedUser);
        setUser(parsedUser);
        if (parsedUser.alias === 'idongcodes') setIsAdmin(true);
        setPraiseForm(prev => ({ ...prev, name: parsedUser.firstName, role: parsedUser.role }));
        setFeedbackForm(prev => ({ ...prev, name: parsedUser.firstName, role: parsedUser.role }));
      }
    };
    loadData();
  }, []);

  // ... [Handlers: handlePraiseChange, handleFeedbackChange, handlePraiseSubmit, handleDeletePraise, handleFeedbackSubmit] ...
  const handlePraiseChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setPraiseForm(prev => ({ ...prev, [name]: value }));
  };
  const handleFeedbackChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFeedbackForm(prev => ({ ...prev, [name]: value }));
  };
  const handlePraiseSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!praiseForm.name || !praiseForm.message) return;
    const newPraise = { id: Date.now(), ...praiseForm, submittedAt: new Date().toISOString() };
    setPraises([newPraise, ...praises]); 
    setPraiseForm({ name: user?.firstName || "", role: user?.role || "Tenant", subject: "", message: "" });
    await addPraise(newPraise);
  };
  const handleDeletePraise = async (id: number) => {
    if (!confirm("Are you sure you want to delete this praise?")) return;
    setPraises(praises.filter(p => p.id !== id));
    await deletePraise(id);
  };
  const handleFeedbackSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!feedbackForm.name || !feedbackForm.message) return;
    setFeedbackStatus("submitting");
    const newFeedback = { id: Date.now(), ...feedbackForm, submittedAt: new Date().toISOString() };
    await addFeedback(newFeedback);
    setFeedbackForm({ name: user?.firstName || "", role: user?.role || "Tenant", subject: "", message: "" });
    setFeedbackStatus("success");
    setTimeout(() => setFeedbackStatus("idle"), 3000);
  };

  // HELPER: Date Formatter
  const formatDate = (isoString?: string) => {
    if (!isoString) return "";
    const date = new Date(isoString);
    return date.toLocaleDateString('en-US', { 
      year: 'numeric', 
      month: '2-digit', 
      day: '2-digit' 
    }) + ', ' + date.toLocaleTimeString('en-US', {
      hour: '2-digit', 
      minute: '2-digit'
    });
  };

  return (
    <main style={{ minHeight: '100vh', display: 'flex', flexDirection: 'column' }}>
      
      {/* HERO & FEATURES SECTIONS (Unchanged, condensed for focus) */}
      <FadeInSection>
        <section style={{ position: 'relative', height: '70vh', width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'flex-start', overflow: 'hidden', padding: '0 2rem' }}>
          <div className="animate-fade-in" style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 0 }}>
            <video autoPlay loop muted playsInline style={{ width: '100%', height: '100%', objectFit: 'cover', objectPosition: 'center' }}><source src="/heroVid.mov" /></video>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, background: 'radial-gradient(circle, rgba(0,0,0,0) 25%, var(--sky-blue) 100%)', opacity: 0.8 }} /> 
            <div style={{ position: 'absolute', bottom: 0, left: 0, right: 0, height: '30%', background: 'linear-gradient(to top, var(--sky-blue) 15%, transparent 100%)' }} />
          </div>
          <div className="animate-slide-in" style={{ position: 'relative', zIndex: 10, maxWidth: '600px', textAlign: 'left' }}>
            <h1 style={{ fontSize: '3.5rem', fontWeight: 'bold', color: 'white', marginBottom: '1rem', textShadow: '0 5px 5px rgba(0,0,0,0.5)' }}>212 May Street</h1>
            <p style={{ fontSize: '1.25rem', fontWeight: '500', color: 'white', marginBottom: '2rem', textShadow: '0 3px 3px rgba(0,0,0,0.5)' }}>Welcome to 212 May Street's...companion web app? Like Home Sweet Home... but from your phone or computer, ha!</p>
            <div style={{ display: 'flex', gap: '15px' }}>
              <Link href="/login" className="hero-btn btn-login">Login</Link>
              <Link href="/join" className="hero-btn btn-join">Join 212 May St</Link>
            </div>
          </div>
        </section>
      </FadeInSection>

      <FadeInSection>
        <section style={{ backgroundColor: 'var(--sky-blue)', padding: '4rem 2rem', display: 'flex', justifyContent: 'center' }}>
          <div style={{ maxWidth: '1200px', width: '100%', display: 'flex', flexWrap: 'wrap', gap: '2rem', justifyContent: 'center' }}>
            <div style={{ backgroundColor: 'white', borderRadius: '20px', padding: '2rem', flex: '1 1 300px', boxShadow: '0 10px 20px rgba(0,0,0,0.1)', textAlign: 'center' }}>
              <div style={{ color: 'var(--sandy-brown)', marginBottom: '1rem', display: 'flex', justifyContent: 'center' }}><MessageCircle size={48} /></div>
              <h3 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '0.5rem', color: '#171717' }}>House Chat</h3>
              <p style={{ color: 'gray' }}>Stay connected with everyone. Coordinate plans, share updates, or just say hi.</p>
            </div>
            <div style={{ backgroundColor: 'white', borderRadius: '20px', padding: '2rem', flex: '1 1 300px', boxShadow: '0 10px 20px rgba(0,0,0,0.1)', textAlign: 'center' }}>
              <div style={{ color: 'var(--sandy-brown)', marginBottom: '1rem', display: 'flex', justifyContent: 'center' }}><Calendar size={48} /></div>
              <h3 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '0.5rem', color: '#171717' }}>Events & Plans</h3>
              <p style={{ color: 'gray' }}>Never miss a house dinner or movie night. check the calendar and join in.</p>
            </div>
            <div style={{ backgroundColor: 'white', borderRadius: '20px', padding: '2rem', flex: '1 1 300px', boxShadow: '0 10px 20px rgba(0,0,0,0.1)', textAlign: 'center' }}>
              <div style={{ color: 'var(--sandy-brown)', marginBottom: '1rem', display: 'flex', justifyContent: 'center' }}><ClipboardList size={48} /></div>
              <h3 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '0.5rem', color: '#171717' }}>Tasks & Chores</h3>
              <p style={{ color: 'gray' }}>Keep the house running smoothly. See what needs doing and lend a hand.</p>
            </div>
          </div>
        </section>
      </FadeInSection>

      {/* PRAISE SECTION */}
      <FadeInSection>
        <section style={{ backgroundColor: '#f9fafb', padding: '4rem 1.5rem' }}>
          <div style={{ maxWidth: '800px', margin: '0 auto' }}>
            
            {(praises.length > 0 || loading) && (
              <div style={{ marginBottom: '4rem', background: 'linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)', padding: '2rem', borderRadius: '20px', boxShadow: 'inset 0 2px 4px rgba(0,0,0,0.05)' }}>
                <h2 style={{ textAlign: 'center', color: 'var(--sandy-brown)', fontSize: '2rem', fontWeight: 'bold', marginBottom: '2rem' }}>House Love <span style={{fontSize: '1.5rem'}}>ü´∂</span></h2>
                {loading ? <p style={{ textAlign: 'center', color: '#0369a1' }}>Loading love...</p> : (
                  <div style={{ display: 'grid', gap: '1.5rem' }}>
                    {praises.map((p) => (
                      <div key={p.id} style={{ position: 'relative', backgroundColor: 'rgba(255, 255, 255, 0.35)', backdropFilter: 'blur(12px)', WebkitBackdropFilter: 'blur(12px)', border: '1px solid rgba(255, 255, 255, 0.6)', boxShadow: '0 8px 32px 0 rgba(31, 38, 135, 0.1)', padding: '1.5rem', borderRadius: '15px' }}>
                        
                        {isAdmin && (
                          <button 
                            onClick={() => handleDeletePraise(p.id)}
                            style={{ position: 'absolute', top: '10px', right: '10px', background: 'white', border: 'none', borderRadius: '50%', padding: '6px', cursor: 'pointer', boxShadow: '0 2px 5px rgba(0,0,0,0.1)' }}
                            title="Delete Praise (Admin)"
                          >
                            <Trash2 size={16} color="#ef4444" />
                          </button>
                        )}

                        <div style={{ marginBottom: '0.5rem', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                          <h4 style={{ fontWeight: 'bold', fontSize: '1.1rem', color: '#171717', margin: 0 }}>{p.subject}</h4>
                          
                          {/* DATE DISPLAY */}
                          {p.submittedAt && (
                            <span style={{ fontSize: '0.75rem', color: '#64748b', marginLeft: '10px' }}>
                              {formatDate(p.submittedAt)}
                            </span>
                          )}
                        </div>

                        <p style={{ color: '#374151', marginBottom: '1.5rem', fontStyle: 'italic', lineHeight: '1.5', fontWeight: '500' }}>"{p.message}"</p>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                          <div style={{ backgroundColor: 'rgba(255,255,255,0.6)', padding: '10px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}><User size={20} color="#6b7280" /></div>
                          <div style={{ display: 'flex', flexDirection: 'column' }}>
                            <span style={{ fontWeight: 'bold', fontSize: '1rem', color: '#171717' }}>{user ? p.name : "Housemate"}</span>
                            <span style={{ fontSize: '0.85rem', color: '#0369a1', fontWeight: 'bold', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{p.role}</span>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}

            <div style={{ backgroundColor: 'white', padding: '2rem', borderRadius: '20px', boxShadow: '0 10px 25px rgba(0,0,0,0.1)' }}>
              <h3 style={{ textAlign: 'center', fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1.5rem', color: '#171717' }}>Leave some Praise</h3>
              
              {!user ? (
                <div style={{ textAlign: 'center', padding: '2rem', backgroundColor: '#f8fafc', borderRadius: '12px', border: '2px dashed #e2e8f0', color: '#94a3b8' }}>
                  <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '10px' }}><Lock size={32} color="#cbd5e1" /></div>
                  <p style={{ fontSize: '1rem' }}>You must be <Link href="/login" style={{ color: 'var(--sky-blue)', fontWeight: 'bold', textDecoration: 'underline' }}>logged in</Link> to leave praise.</p>
                </div>
              ) : (
                <form onSubmit={handlePraiseSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '1rem' }}>
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '5px', flex: '1 1 200px' }}>
                      <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#4b5563' }}>First Name</label>
                      <input type="text" name="name" value={praiseForm.name} onChange={handlePraiseChange} placeholder="Jane" required style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #d1d5db', fontSize: '1rem' }} />
                    </div>
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '5px', flex: '1 1 200px' }}>
                      <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#4b5563' }}>Role</label>
                      <select name="role" value={praiseForm.role} onChange={handlePraiseChange} style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #d1d5db', fontSize: '1rem', backgroundColor: 'white' }}>
                        <option value="Tenant">Tenant</option>
                        <option value="Owner">Owner</option>
                        <option value="First Lady">First Lady</option>
                      </select>
                    </div>
                  </div>
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
                    <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#4b5563' }}>Subject</label>
                    <input type="text" name="subject" value={praiseForm.subject} onChange={handlePraiseChange} placeholder="Just saying hi!" required style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #d1d5db', fontSize: '1rem' }} />
                  </div>
                  <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
                    <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#4b5563' }}>Message</label>
                    <textarea name="message" value={praiseForm.message} onChange={handlePraiseChange} placeholder="Share your thoughts..." required rows={4} style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #d1d5db', fontSize: '1rem', fontFamily: 'inherit' }} />
                  </div>
                  <button type="submit" style={{ marginTop: '10px', backgroundColor: 'var(--sandy-brown)', color: 'white', border: 'none', padding: '12px', borderRadius: '10px', fontSize: '1rem', fontWeight: 'bold', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px', transition: 'opacity 0.2s', width: '100%' }}>Send Praise <Send size={18} /></button>
                </form>
              )}
            </div>
          </div>
        </section>
      </FadeInSection>

      {/* FEEDBACK SECTION */}
      <FadeInSection>
        <section style={{ backgroundColor: '#1e293b', padding: '4rem 1.5rem', color: 'white' }}>
          <div style={{ maxWidth: '800px', margin: '0 auto' }}>
            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px', marginBottom: '1rem' }}>
              <Bug size={32} color="var(--sandy-brown)" />
              <Lightbulb size={32} color="var(--sky-blue)" />
            </div>

            <h3 style={{ textAlign: 'center', fontSize: '1.8rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>Help us improve</h3>
            <p style={{ textAlign: 'center', color: '#94a3b8', marginBottom: '2rem' }}>
              Have a feature request, found a bug, or just want to chat? We are listening.
              <br/>
              <Link href="/feedback" style={{ color: 'var(--sky-blue)', textDecoration: 'underline', marginTop: '10px', display: 'inline-block' }}>View submitted feedback</Link>
            </p>

            {!user ? (
              <div style={{ backgroundColor: '#334155', padding: '3rem', borderRadius: '20px', textAlign: 'center', border: '1px dashed #475569', color: '#94a3b8' }}>
                 <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '15px' }}><Lock size={32} color="#64748b" /></div>
                 <p style={{ fontSize: '1rem' }}>Please <Link href="/login" style={{ color: 'var(--sky-blue)', fontWeight: 'bold', textDecoration: 'underline' }}>log in</Link> to submit feedback.</p>
              </div>
            ) : (
              <form onSubmit={handleFeedbackSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem', backgroundColor: '#334155', padding: '2rem', borderRadius: '20px', border: '1px solid #475569' }}>
                {/* ... (Feedback Form inputs unchanged) ... */}
                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '1rem' }}>
                  <div style={{ flex: '1 1 200px', display: 'flex', flexDirection: 'column', gap: '5px' }}>
                    <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#cbd5e1' }}>First Name</label>
                    <input type="text" name="name" value={feedbackForm.name} onChange={handleFeedbackChange} placeholder="John" required style={{ padding: '12px', borderRadius: '8px', border: '1px solid #475569', backgroundColor: '#1e293b', color: 'white', fontSize: '1rem' }} />
                  </div>
                  <div style={{ flex: '1 1 200px', display: 'flex', flexDirection: 'column', gap: '5px' }}>
                    <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#cbd5e1' }}>Role</label>
                    <select name="role" value={feedbackForm.role} onChange={handleFeedbackChange} style={{ padding: '12px', borderRadius: '8px', border: '1px solid #475569', backgroundColor: '#1e293b', color: 'white', fontSize: '1rem' }}>
                      <option value="Tenant">Tenant</option>
                      <option value="Landlord">Landlord</option>
                      <option value="First Lady">First Lady</option>
                    </select>
                  </div>
                </div>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
                  <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#cbd5e1' }}>Subject</label>
                  <input type="text" name="subject" value={feedbackForm.subject} onChange={handleFeedbackChange} placeholder="Feature Request: Dark Mode" required style={{ padding: '12px', borderRadius: '8px', border: '1px solid #475569', backgroundColor: '#1e293b', color: 'white', fontSize: '1rem' }} />
                </div>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>
                  <label style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#cbd5e1' }}>Message</label>
                  <textarea name="message" value={feedbackForm.message} onChange={handleFeedbackChange} placeholder="Tell us what's on your mind..." required rows={4} style={{ padding: '12px', borderRadius: '8px', border: '1px solid #475569', backgroundColor: '#1e293b', color: 'white', fontSize: '1rem', fontFamily: 'inherit' }} />
                </div>
                <button type="submit" disabled={feedbackStatus === "submitting" || feedbackStatus === "success"} style={{ backgroundColor: feedbackStatus === "success" ? 'var(--light-green)' : 'var(--sky-blue)', color: feedbackStatus === "success" ? '#171717' : 'white', border: 'none', padding: '14px', borderRadius: '10px', fontSize: '1rem', fontWeight: 'bold', cursor: 'pointer', transition: 'all 0.2s', opacity: feedbackStatus === "submitting" ? 0.7 : 1 }}>
                  {feedbackStatus === "submitting" ? "Sending..." : feedbackStatus === "success" ? "Received! Thanks." : "Submit Feedback"}
                </button>
              </form>
            )}
          </div>
        </section>
      </FadeInSection>
      
      <FadeInSection>
        <section style={{ maxWidth: '900px', margin: '0 auto', padding: '2rem' }}>
          <div style={{ backgroundColor: 'white', padding: '2rem', borderRadius: '20px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' }}>
            <h2 style={{ color: 'var(--sandy-brown)', fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1rem' }}>What's New?</h2>
            <p style={{ color: 'gray' }}>Check the <span style={{ color: 'var(--sky-blue)', fontWeight: 'bold' }}>Common Room</span> to see who's around, or visit <span style={{ color: 'var(--sky-blue)', fontWeight: 'bold' }}>Mates</span> to see what everyone is up to.</p>
          </div>
        </section>
      </FadeInSection>

    </main>
  );
}
</file>

<file path="app/layout.tsx">
/**
 * file: app/layout.tsx
 * description: Wrapped children in RouteGuard to enforce access control.
 */

import type { Metadata } from "next";
import "./globals.css"; 
import Navigation from "./components/Navigation";
import Footer from "./components/Footer";
import Header from "./components/Header"; 
import AutoLogout from "./components/AutoLogout"; 
import RouteGuard from "./components/RouteGuard"; // <--- Import the Guard

export const metadata: Metadata = {
  title: "212 May Street",
  description: "A web app for 212 May Street housemates.",
  icons: {
    icon: '/logo+favicon.ico',
  },
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body>
        {/* Handles 15-min inactivity logout */}
        <AutoLogout />

        {/* Protects routes based on login status */}
        <RouteGuard>
          <Header />
          
          {children}

          <Footer />
          <Navigation />
        </RouteGuard>
      </body>
    </html>
  );
}
</file>

</files>
